# Grafana Helm Chart Configuration
# This chart deploys Grafana with Crossplane provider support and External Secrets integration

# Grafana application configuration
grafana:
  # Enable/disable SSO authentication (boolean)
  ssoAuthEnabled: false
  # Optional SSO connector path to auto-select upstream IDP (e.g., "github", "google")
  # When set, appends to auth_url: ${issuerUrl}/auth/${connector}
  connector: ""
  # Number of Grafana replicas (must be >= 1)
  replicas: 2
  # List of Grafana plugins to install
  # Examples:
  # - yesoreyeram-infinity-datasource  # Install from plugin catalog
  # - yesoreyeram-infinity-datasource@3.0.0  # Specific version
  # - plugin-name@version@https://url/to/plugin.zip  # From URL
  plugins: []
  ingress:
    enabled: false
    # Hostname for Grafana ingress (alphanumeric characters and hyphens only)
    host: gf
    # Ingress class name (e.g., nginx, alb)
    ingressClassName: nginx
  httpRoute:
    enabled: true
    host: gf
    sharedGatewayName: platform
    sharedGatewayNamespace: kube-system
  tenants: []

grafanaChart:
  # renovate: datasource=helm depName=grafana registryUrl=https://grafana-community.github.io/helm-charts
  version: 11.2.0
  # Helm release name for Grafana
  releaseName: gf

# ArgoCD configuration
argocd:
  # ArgoCD project name for deployment (required, cannot be empty)
  project: default

# Database configuration
database:
  cnpg: true
  # Whether to restore from an existing snapshot
  restoreFromSnapshot: false
  # Snapshot ID to restore from (required if restoreFromSnapshot is true, alphanumeric and hyphens only)
  snapshotId: "grafana-202501201706"

# Crossplane providers configuration
crossplaneProviders:
  # Enable/disable Crossplane Grafana provider (boolean)
  grafana:
    enabled: true
    # Enable debug logging for the provider (boolean)
    debug: false
    # List of Grafana datasources to create via Crossplane
    datasources: []
    # Example:
    # - name: Mimir
    #   type: prometheus
    #   uid: mimir
    #   url: http://mimir-gateway.mimir-system.svc.cluster.local/prometheus
    #   accessMode: proxy  # Optional, defaults to proxy
    #   isDefault: false   # Optional, defaults to false
    #   jsonDataEncoded: '{"authType":"default"}'  # Optional
  # Enable/disable Crossplane Orgmapper provider (boolean)
  orgmapper:
    enabled: true
    # Enable debug logging for the provider (boolean)
    debug: false

# Datasource configuration
datasources:
  # Base URL for the datasource gateway service
  gatewayUrl: "http://datasource-gateway.otlp-gateway.svc.cluster.local"
  # Enable/disable individual datasources (all disabled by default)
  mimir:
    enabled: false
  loki:
    enabled: false
  tempo:
    enabled: false

# Environment configuration
environmentConfig:
  # Fully qualified domain name for the cluster (required, must be valid domain format)
  clusterFqdn: "" 
  # Resource prefix for the cluster (alphanumeric characters and hyphens only)
  resourcePrefix: ""
