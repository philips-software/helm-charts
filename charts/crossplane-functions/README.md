# crossplane-functions

![Version: 0.0.11](https://img.shields.io/badge/Version-0.0.11-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square)

## Overview

This Helm chart is designed for deploying Crossplane Functions that extend the capabilities of Crossplane compositions. Functions provide a way to transform, validate, and enhance resource definitions during the composition process, enabling more sophisticated infrastructure-as-code patterns.

The chart enables you to:
- Deploy multiple Crossplane functions simultaneously
- Manage function versions and registries centrally
- Standardize function deployment across environments
- Extend compositions with custom logic and transformations

Common use cases include:
- **Patch and Transform**: Modify resource specifications dynamically
- **Go Templating**: Use Go templates for complex resource generation
- **Auto Ready**: Automatically manage composition readiness states
- **Environment Configs**: Handle environment-specific configurations

# Deployment

This chart can be deployed using Kustomize and ArgoCD for GitOps-based continuous deployment.

## Kustomize Deployment

Create a `kustomization.yaml` file:

```yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

helmCharts:
  - name: crossplane-functions
    repo: https://philips-software.github.io/helm-charts
    version: "0.0.11"
    releaseName: crossplane-functions
    namespace: crossplane-system
    valuesFile: values.yaml
```

Then deploy with:
```bash
kubectl apply -k .
```

## ArgoCD Application

Create an ArgoCD Application manifest:

```yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: crossplane-functions
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://philips-software.github.io/helm-charts
    chart: crossplane-functions
    targetRevision: "0.0.11"
    helm:
      valueFiles:
        - values.yaml
  destination:
    server: https://kubernetes.default.svc
    namespace: crossplane-system
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
```

## Prerequisites

- Crossplane must be installed in the cluster (v1.14+ recommended for function support)
- Ensure the `crossplane-system` namespace exists
- Functions require appropriate RBAC permissions to interact with Crossplane resources

## Dependencies

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| criticalFunctions.affinity.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms[0].matchExpressions[0].key | string | `"node-type"` |  |
| criticalFunctions.affinity.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms[0].matchExpressions[0].operator | string | `"In"` |  |
| criticalFunctions.affinity.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms[0].matchExpressions[0].values[0] | string | `"system"` |  |
| criticalFunctions.tolerations[0].key | string | `"CriticalAddonsOnly"` |  |
| criticalFunctions.tolerations[0].operator | string | `"Exists"` |  |
| extraFunctions | list | `[]` |  |
| features.deploymentRuntimeConfig | bool | `true` |  |
| functions[0].critical | bool | `true` |  |
| functions[0].name | string | `"function-auto-ready"` |  |
| functions[0].registry | string | `"ghcr.io/crossplane-contrib"` |  |
| functions[0].version | string | `"v0.5.1"` |  |
| functions[1].critical | bool | `true` |  |
| functions[1].name | string | `"function-go-templating"` |  |
| functions[1].registry | string | `"ghcr.io/crossplane-contrib"` |  |
| functions[1].version | string | `"v0.11.0"` |  |
| functions[2].critical | bool | `true` |  |
| functions[2].name | string | `"function-patch-and-transform"` |  |
| functions[2].registry | string | `"ghcr.io/crossplane-contrib"` |  |
| functions[2].version | string | `"v0.9.1"` |  |
| functions[3].critical | bool | `true` |  |
| functions[3].name | string | `"function-environment-configs"` |  |
| functions[3].registry | string | `"ghcr.io/crossplane-contrib"` |  |
| functions[3].version | string | `"v0.4.0"` |  |
| resources.limits.memory | string | `"256Mi"` |  |
| resources.requests.cpu | string | `"20m"` |  |
| resources.requests.memory | string | `"128Mi"` |  |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.14.2](https://github.com/norwoodj/helm-docs/releases/v1.14.2)
